{{ block title }}{{ endblock }}

{{ block content }}

<script src="{% static 'global/js/grain-img.js' %}"></script>
<script src="{% static 'global/js/start-modal.js' %}"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<style>
    .otree-timer {
        display: none;
    }
</style>

<link rel="stylesheet" type="text/css" href="{% static 'global/styles/modal.css' %}">

<div id="app">
    <start-modal-component
        ref="infomodal"
        :start-object="infoModalObject"
        :mechanism-object="mechanismObject"
        :is-officer="isOfficer"
        :group-player-id="groupPlayerId"
        :round-number="roundNumber"
    ></start-modal-component>
</div>

<script>
    const { createApp } = Vue

    const app = createApp({
        components: {
            'start-modal-component': startModalComponent,
            'grain-image-component': grainImageComponent,
        },
        compilerOptions: {
            delimiters: ["${", "}"]
        },
        data() {
            return {
                infoModalObject: {{start_modal_object | json}},
                mechanismObject: {{mechanism_object | json}},
                isOfficer: {{player.id_in_group}} == 1,
                groupPlayerId: {{player.id_in_group}},
                roundNumber: {{player.round_number}},
            }
        }, 
        mounted() {
            this.openInfoModal();
            console.log(this.infoModalObject)
            console.log(this.mechanismObject)
        },
        methods: {
            openInfoModal: function() {
                this.$refs.infomodal.open();
            },
        },
    }).mount('#app')
</script>

{{ endblock }}
